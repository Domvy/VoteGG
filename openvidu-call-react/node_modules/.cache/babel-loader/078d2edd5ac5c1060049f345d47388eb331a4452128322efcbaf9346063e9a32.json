{"ast":null,"code":"import React,{Component}from'react';import'./StreamComponent.css';import OvVideoComponent from'./OvVideo';import MicOff from'@material-ui/icons/MicOff';import VideocamOff from'@material-ui/icons/VideocamOff';import VolumeUp from'@material-ui/icons/VolumeUp';import VolumeOff from'@material-ui/icons/VolumeOff';import FormControl from'@material-ui/core/FormControl';import Input from'@material-ui/core/Input';import InputLabel from'@material-ui/core/InputLabel';import IconButton from'@material-ui/core/IconButton';import HighlightOff from'@material-ui/icons/HighlightOff';import FormHelperText from'@material-ui/core/FormHelperText';export default class StreamComponent extends Component{constructor(props){super(props);this.state={nickname:this.props.user.getNickname(),showForm:false,mutedSound:false,isFormValid:true};this.handleChange=this.handleChange.bind(this);this.handlePressKey=this.handlePressKey.bind(this);this.toggleNicknameForm=this.toggleNicknameForm.bind(this);this.toggleSound=this.toggleSound.bind(this);}handleChange(event){this.setState({nickname:event.target.value});event.preventDefault();}toggleNicknameForm(){if(this.props.user.isLocal()){this.setState({showForm:!this.state.showForm});}}toggleSound(){this.setState({mutedSound:!this.state.mutedSound});}handlePressKey(event){if(event.key==='Enter'){console.log(this.state.nickname);if(this.state.nickname.length>=3&&this.state.nickname.length<=20){this.props.handleNickname(this.state.nickname);this.toggleNicknameForm();this.setState({isFormValid:true});}else{this.setState({isFormValid:false});}}}render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"OT_widget-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pointer nickname\"},this.state.showForm?/*#__PURE__*/React.createElement(FormControl,{id:\"nicknameForm\"},/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",id:\"closeButton\",onClick:this.toggleNicknameForm},/*#__PURE__*/React.createElement(HighlightOff,null)),/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"name-simple\",id:\"label\"},\"Nickname\"),/*#__PURE__*/React.createElement(Input,{color:\"inherit\",id:\"input\",value:this.state.nickname,onChange:this.handleChange,onKeyPress:this.handlePressKey,required:true}),!this.state.isFormValid&&this.state.nickname.length<=3&&/*#__PURE__*/React.createElement(FormHelperText,{id:\"name-error-text\"},\"Nickname is too short!\"),!this.state.isFormValid&&this.state.nickname.length>=20&&/*#__PURE__*/React.createElement(FormHelperText,{id:\"name-error-text\"},\"Nickname is too long!\")):/*#__PURE__*/React.createElement(\"div\",{onClick:this.toggleNicknameForm},/*#__PURE__*/React.createElement(\"span\",{id:\"nickname\"},this.props.user.getNickname()),this.props.user.isLocal()&&/*#__PURE__*/React.createElement(\"span\",{id:\"\"},\" (edit)\"))),this.props.user!==undefined&&this.props.user.getStreamManager()!==undefined?/*#__PURE__*/React.createElement(\"div\",{className:\"streamComponent\"},/*#__PURE__*/React.createElement(OvVideoComponent,{user:this.props.user,mutedSound:this.state.mutedSound}),/*#__PURE__*/React.createElement(\"div\",{id:\"statusIcons\"},!this.props.user.isVideoActive()?/*#__PURE__*/React.createElement(\"div\",{id:\"camIcon\"},/*#__PURE__*/React.createElement(VideocamOff,{id:\"statusCam\"})):null,!this.props.user.isAudioActive()?/*#__PURE__*/React.createElement(\"div\",{id:\"micIcon\"},/*#__PURE__*/React.createElement(MicOff,{id:\"statusMic\"})):null),/*#__PURE__*/React.createElement(\"div\",null,!this.props.user.isLocal()&&/*#__PURE__*/React.createElement(IconButton,{id:\"volumeButton\",onClick:this.toggleSound},this.state.mutedSound?/*#__PURE__*/React.createElement(VolumeOff,{color:\"secondary\"}):/*#__PURE__*/React.createElement(VolumeUp,null)))):null);}}","map":{"version":3,"names":["React","Component","OvVideoComponent","MicOff","VideocamOff","VolumeUp","VolumeOff","FormControl","Input","InputLabel","IconButton","HighlightOff","FormHelperText","StreamComponent","constructor","props","state","nickname","user","getNickname","showForm","mutedSound","isFormValid","handleChange","bind","handlePressKey","toggleNicknameForm","toggleSound","event","setState","target","value","preventDefault","isLocal","key","console","log","length","handleNickname","render","createElement","className","id","color","onClick","htmlFor","onChange","onKeyPress","required","undefined","getStreamManager","isVideoActive","isAudioActive"],"sources":["/home/ubuntu/Project-Agora/openvidu-call-react/src/components/stream/StreamComponent.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './StreamComponent.css';\nimport OvVideoComponent from './OvVideo';\n\nimport MicOff from '@material-ui/icons/MicOff';\nimport VideocamOff from '@material-ui/icons/VideocamOff';\nimport VolumeUp from '@material-ui/icons/VolumeUp';\nimport VolumeOff from '@material-ui/icons/VolumeOff';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport IconButton from '@material-ui/core/IconButton';\nimport HighlightOff from '@material-ui/icons/HighlightOff';\nimport FormHelperText from '@material-ui/core/FormHelperText';\n\nexport default class StreamComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { nickname: this.props.user.getNickname(), showForm: false, mutedSound: false, isFormValid: true };\n        this.handleChange = this.handleChange.bind(this);\n        this.handlePressKey = this.handlePressKey.bind(this);\n        this.toggleNicknameForm = this.toggleNicknameForm.bind(this);\n        this.toggleSound = this.toggleSound.bind(this);\n    }\n\n    handleChange(event) {\n        this.setState({ nickname: event.target.value });\n        event.preventDefault();\n    }\n\n    toggleNicknameForm() {\n        if (this.props.user.isLocal()) {\n            this.setState({ showForm: !this.state.showForm });\n        }\n    }\n\n    toggleSound() {\n        this.setState({ mutedSound: !this.state.mutedSound });\n    }\n\n    handlePressKey(event) {\n        if (event.key === 'Enter') {\n            console.log(this.state.nickname);\n            if (this.state.nickname.length >= 3 && this.state.nickname.length <= 20) {\n                this.props.handleNickname(this.state.nickname);\n                this.toggleNicknameForm();\n                this.setState({ isFormValid: true });\n            } else {\n                this.setState({ isFormValid: false });\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"OT_widget-container\">\n                <div className=\"pointer nickname\">\n                    {this.state.showForm ? (\n                        <FormControl id=\"nicknameForm\">\n                            <IconButton color=\"inherit\" id=\"closeButton\" onClick={this.toggleNicknameForm}>\n                                <HighlightOff />\n                            </IconButton>\n                            <InputLabel htmlFor=\"name-simple\" id=\"label\">\n                                Nickname\n                            </InputLabel>\n                            <Input\n                                color=\"inherit\"\n                                id=\"input\"\n                                value={this.state.nickname}\n                                onChange={this.handleChange}\n                                onKeyPress={this.handlePressKey}\n                                required\n                            />\n                            {!this.state.isFormValid && this.state.nickname.length <= 3 && (\n                                <FormHelperText id=\"name-error-text\">Nickname is too short!</FormHelperText>\n                            )}\n                            {!this.state.isFormValid && this.state.nickname.length >= 20 && (\n                                <FormHelperText id=\"name-error-text\">Nickname is too long!</FormHelperText>\n                            )}\n                        </FormControl>\n                    ) : (\n                        <div onClick={this.toggleNicknameForm}>\n                            <span id=\"nickname\">{this.props.user.getNickname()}</span>\n                            {this.props.user.isLocal() && <span id=\"\"> (edit)</span>}\n                        </div>\n                    )}\n                </div>\n\n                {this.props.user !== undefined && this.props.user.getStreamManager() !== undefined ? (\n                    <div className=\"streamComponent\">\n                        <OvVideoComponent user={this.props.user} mutedSound={this.state.mutedSound} />\n                        <div id=\"statusIcons\">\n                            {!this.props.user.isVideoActive() ? (\n                                <div id=\"camIcon\">\n                                    <VideocamOff id=\"statusCam\" />\n                                </div>\n                            ) : null}\n\n                            {!this.props.user.isAudioActive() ? (\n                                <div id=\"micIcon\">\n                                    <MicOff id=\"statusMic\" />\n                                </div>\n                            ) : null}\n                        </div>\n                        <div>\n                            {!this.props.user.isLocal() && (\n                                <IconButton id=\"volumeButton\" onClick={this.toggleSound}>\n                                    {this.state.mutedSound ? <VolumeOff color=\"secondary\" /> : <VolumeUp />}\n                                </IconButton>\n                            )}\n                        </div>\n                    </div>\n                ) : null}\n            </div>\n        );\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}